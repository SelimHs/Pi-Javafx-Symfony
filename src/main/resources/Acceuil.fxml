<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.RowConstraints?>

<GridPane fx:id="mainGrid" prefHeight="671.0" prefWidth="950.0"
          style="-fx-background-color: linear-gradient(to bottom, #030307, #131022);"
          xmlns="http://javafx.com/javafx/23.0.1"
          xmlns:fx="http://javafx.com/fxml/1"
          fx:controller="controller.AcceuilController">

    <!-- DÃ©finir les colonnes -->
    <columnConstraints>
        <ColumnConstraints prefWidth="220" minWidth="220" maxWidth="220" /> <!-- Barre latÃ©rale fixe -->
        <ColumnConstraints hgrow="ALWAYS" /> <!-- Contenu principal flexible -->
    </columnConstraints>

    <!-- DÃ©finir les lignes -->
    <rowConstraints>
        <RowConstraints vgrow="ALWAYS" /> <!-- Toute la hauteur -->
    </rowConstraints>

    <!-- ðŸŒŸ Barre latÃ©rale -->
    <VBox style="-fx-background-color: linear-gradient(to bottom, #131022, #1A172A);
                 -fx-padding: 15px;
                 -fx-border-radius: 15 0 0 15;
                 -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.4), 15, 0, 3, 3);"
          GridPane.columnIndex="0" GridPane.rowIndex="0">
        <children>
            <!-- Logo -->
            <ImageView fitHeight="90.0" fitWidth="90.0" pickOnBounds="true" preserveRatio="true">
                <image>
                    <Image url="@logo.png" />
                </image>
            </ImageView>

            <!-- Nom de l'application -->
            <Label text="Dashboard"
                   style="-fx-font-size: 20px; -fx-text-fill: white; -fx-font-weight: bold;
                          -fx-padding: 15px; -fx-alignment: center;"/>

            <!-- ðŸŒŸ Menu de navigation -->
            <Button text="ðŸ“… Ã‰vÃ©nements" onAction="#goToEventList" onMouseEntered="#buttonHoverEffect" onMouseExited="#buttonExitEffect"
                    style="-fx-background-color: transparent; -fx-text-fill: #a868a0;
                           -fx-font-size: 16px; -fx-border-radius: 10px; -fx-padding: 10px 18px;"/>

            <Button text="ðŸŽŸ Billets" onAction="#goToBilletList" onMouseEntered="#buttonHoverEffect" onMouseExited="#buttonExitEffect"
                    style="-fx-background-color: transparent; -fx-text-fill: #a868a0;
                           -fx-font-size: 18px; -fx-border-radius: 10px; -fx-padding: 10px 18px;"/>

            <Button text="ðŸ“Œ RÃ©servations" onAction="#goToReservation" onMouseEntered="#buttonHoverEffect" onMouseExited="#buttonExitEffect"
                    style="-fx-background-color: transparent; -fx-text-fill: #a868a0;
                           -fx-font-size: 18px; -fx-border-radius: 10px; -fx-padding: 10px 18px;"/>

            <Button text="ðŸ’° Remises" onAction="#goToRemise" onMouseEntered="#buttonHoverEffect" onMouseExited="#buttonExitEffect"
                    style="-fx-background-color: transparent; -fx-text-fill: #a868a0;
                           -fx-font-size: 18px; -fx-border-radius: 10px; -fx-padding: 10px 18px;"/>

            <Button text="ðŸ¢ Fournisseurs" onAction="#goToFournisseurList" onMouseEntered="#buttonHoverEffect" onMouseExited="#buttonExitEffect"
                    style="-fx-background-color: transparent; -fx-text-fill: #a868a0;
                           -fx-font-size: 18px; -fx-border-radius: 10px; -fx-padding: 10px 18px;"/>

            <Button text="ðŸ“¦ Produits" onAction="#goToProduitList" onMouseEntered="#buttonHoverEffect" onMouseExited="#buttonExitEffect"
                    style="-fx-background-color: transparent; -fx-text-fill: #a868a0;
                           -fx-font-size: 18px; -fx-border-radius: 10px; -fx-padding: 10px 18px;"/>

            <Button text="ðŸ  Espaces" onAction="#goToEspace" onMouseEntered="#buttonHoverEffect" onMouseExited="#buttonExitEffect"
                    style="-fx-background-color: transparent; -fx-text-fill: #a868a0;
                           -fx-font-size: 18px; -fx-border-radius: 10px; -fx-padding: 10px 18px;"/>

            <Button text="ðŸ§‘â€ðŸ’» Utilisateurs" onAction="#goToHomePage" onMouseEntered="#buttonHoverEffect" onMouseExited="#buttonExitEffect"
                    style="-fx-background-color: transparent; -fx-text-fill: #a868a0;
                           -fx-font-size: 18px; -fx-border-radius: 10px; -fx-padding: 10px 18px;"/>

            <!-- ðŸ”“ Bouton DÃ©connexion -->
            <Button fx:id="logoutButton" text="ðŸ”“ DÃ©connexion" onAction="#handleLogout"
                    style="-fx-background-color: #E74C3C; -fx-text-fill: white; -fx-font-size: 16px;
                           -fx-font-weight: bold; -fx-border-radius: 10px; -fx-padding: 12px 20px;"/>
        </children>
    </VBox>

    <!-- ðŸŒŸ Contenu principal -->
    <VBox style="-fx-alignment: center; -fx-padding: 20px;" GridPane.columnIndex="1" GridPane.rowIndex="0">
        <children>
            <Label text="ðŸ“Š Tableau de Bord"
                   style="-fx-font-size: 26px; -fx-text-fill: white; -fx-font-weight: bold;"/>

            <!-- ðŸ“Œ Conteneur gÃ©nÃ©ral pour les statistiques -->
            <HBox spacing="20" style="-fx-alignment: center; -fx-padding: 10px;">
                <!-- ðŸ“Š Conteneur du BarChart -->
                <VBox fx:id="vboxStats" spacing="10" style="-fx-padding: 10px; -fx-alignment: center;">
                    <Label text="ðŸ“Š Statistiques des Ã‰vÃ©nements"
                           style="-fx-font-size: 20px; -fx-text-fill: #a868a0; -fx-font-weight: bold;"/>
                    <AnchorPane prefHeight="400.0" prefWidth="100.0"
                                style="-fx-background-color: rgba(255, 255, 255, 0.1);
                                       -fx-padding: 15px; -fx-border-radius: 12px;
                                       -fx-border-color: white;
                                       -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.3), 10, 0, 3, 3);">
                        <BarChart fx:id="eventStatsChart"
                                  prefHeight="380.0" prefWidth="100.0"
                                  style="-fx-background-color: transparent;">
                            <xAxis>
                                <CategoryAxis fx:id="eventAxis" label="Ã‰vÃ©nements"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="ticketCountAxis" label="Nombre de billets"/>
                            </yAxis>
                        </BarChart>
                    </AnchorPane>
                </VBox>

                <!-- ðŸ“Œ Conteneur du PieChart -->
                <VBox spacing="10" style="-fx-padding: 10px; -fx-alignment: center;">
                    <Label text="ðŸ“ RÃ©partition des Espaces Disponibles"
                           style="-fx-font-size: 20px; -fx-text-fill: #a868a0; -fx-font-weight: bold;"/>
                    <AnchorPane prefHeight="400.0" prefWidth="100.0"
                                style="-fx-background-color: rgba(255, 255, 255, 0.1);
                                       -fx-padding: 15px; -fx-border-radius: 12px;
                                       -fx-border-color: white;
                                       -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.3), 10, 0, 3, 3);">
                        <PieChart fx:id="pieChartEspaces"
                                  prefHeight="380.0" prefWidth="100.0"
                                  style="-fx-background-color: transparent;"/>
                    </AnchorPane>
                </VBox>
            </HBox>
        </children>
    </VBox>
</GridPane>