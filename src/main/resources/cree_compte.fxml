<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>

<AnchorPane xmlns="http://javafx.com/javafx/20" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.HomePage"
            stylesheets="@../styles.css"
            style="-fx-background-color: linear-gradient(to bottom, #8a2be2, #4b0082);">

    <!-- Sidebar -->
    <VBox prefWidth="200" AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
          style="-fx-background-color: linear-gradient(to bottom, #8a2be2, #6a1b9a); -fx-padding: 20px;">
        <!-- Bouton User avec icône -->
        <Button fx:id="userButton" text="User" styleClass="sidebar-button">
            <graphic>
                <ImageView fitWidth="20" fitHeight="20">
                    <image>
                        <Image url="@images/user.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>
    </VBox>

    <!-- Contenu principal -->
    <AnchorPane AnchorPane.leftAnchor="200" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0">

        <!-- Barre de recherche avec icône -->
        <HBox spacing="10" AnchorPane.topAnchor="20" AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20">
            <TextField fx:id="searchField" promptText="Rechercher un utilisateur..."
                       style="-fx-background-color: #fff; -fx-font-size: 14px; -fx-background-radius: 15px; -fx-padding: 8px; -fx-pref-width: 100%;">
                <effect>
                    <DropShadow color="#00000080" radius="5" offsetX="2" offsetY="2"/>
                </effect>
            </TextField>
            <Button styleClass="search-button">
                <graphic>
                    <ImageView fitWidth="24" fitHeight="24">
                        <image>
                            <Image url="@images/search.png" />
                        </image>
                    </ImageView>
                </graphic>
            </Button>
        </HBox>

        <!-- Affichage dynamique des cartes d'utilisateurs -->
        <ScrollPane fx:id="userListScrollPane" AnchorPane.topAnchor="70" AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20" AnchorPane.bottomAnchor="90"
                    style="-fx-background-color: transparent;">
            <VBox fx:id="userCardsContainer" spacing="10" style="-fx-padding: 10px;" />
        </ScrollPane>

        <!-- Boutons Ajouter, Modifier et Supprimer -->
        <HBox spacing="15" AnchorPane.bottomAnchor="20" AnchorPane.leftAnchor="20">
            <Button fx:id="addButton" text="Ajouter" styleClass="button" onAction="#handleAddUser"/>
            <Button fx:id="editButton" text="Modifier" styleClass="button" onAction="#handleEditUser"/>
            <Button fx:id="deleteSelectedButton" text="Supprimer la sélection" styleClass="button" onAction="#deleteSelectedUsers"/>
        </HBox>

    </AnchorPane>

    <!-- Bouton de déconnexion avec icône -->
    <Button fx:id="logoutButton" text="Déconnexion" styleClass="logout-button" onAction="#handleLogout">
        <graphic>
            <ImageView fitWidth="20" fitHeight="20">
                <image>
                    <Image url="@images/logout.png" />
                </image>
            </ImageView>
        </graphic>
    </Button>

</AnchorPane>