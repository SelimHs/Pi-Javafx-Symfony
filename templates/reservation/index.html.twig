{% extends 'baseBack.html.twig' %}

{% block title %}Liste des Réservations{% endblock %}

{% block body %}
<div class="app-main__outer">
  <div class="app-main__inner">

    <div class="app-page-title">
      <div class="page-title-wrapper">
        <div class="page-title-heading">
          <div class="page-title-icon">
            <i class="pe-7s-note2 icon-gradient bg-mean-fruit"></i>
          </div>
          <div>
            Gestion des Réservations
            <div class="page-title-subheading">Visualisez et gérez les réservations enregistrées.</div>
          </div>
        </div>
        <div class="page-title-actions">
          <a href="{{ path('app_reservation_new') }}" class="btn btn-success">
            <i class="pe-7s-plus"></i> Nouvelle Réservation
          </a>
        </div>
      </div>
    </div>

    <div class="main-card mb-3 card">
      <div class="card-header">
        Réservations enregistrées
      </div>
      <div class="table-responsive">
        <table class="align-middle mb-0 table table-striped table-hover">
          <thead>
            <tr>
              <th class="text-center">#</th>
              <th>Date de Réservation</th>
              <th>Statut</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for reservation in reservations %}
              <tr>
                <td class="text-center text-muted">#{{ reservation.idReservation }}</td>
                <td>{{ reservation.dateReservation ? reservation.dateReservation|date('Y-m-d H:i') : '—' }}</td>
                <td>
                  {% if reservation.statut == 'confirmée' %}
                    <span class="badge badge-success">Confirmée</span>
                  {% elseif reservation.statut == 'annulée' %}
                    <span class="badge badge-danger">Annulée</span>
                  {% else %}
                    <span class="badge badge-warning">{{ reservation.statut }}</span>
                  {% endif %}
                </td>
                <td class="text-center">
                  <a href="{{ path('app_reservation_show', {'idReservation': reservation.idReservation}) }}" class="btn btn-sm btn-info">
                    <i class="fas fa-eye"></i> Détails
                  </a>
                  <a href="{{ path('app_reservation_edit', {'idReservation': reservation.idReservation}) }}" class="btn btn-sm btn-warning">
                    <i class="fas fa-edit"></i> Modifier
                  </a>
                </td>
              </tr>
            {% else %}
              <tr>
                <td colspan="4" class="text-center text-muted">Aucune réservation trouvée.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

  </div>
</div>
{% endblock %}
