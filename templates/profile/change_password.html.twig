{% extends 'base.html.twig' %}

{% block title %}ðŸ”’ Mise Ã  jour du mot de passe{% endblock %}

{% block body %}
<section class="password-reset-page d-flex align-items-center">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6 col-xl-5">
                <div class="card shadow rounded-4 border-0">
                    <div class="card-body p-5">
                        <div class="text-center mb-4">
                            <div class="security-avatar mb-3">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h2 class="fw-bold">Changer votre mot de passe</h2>
                            <p class="text-muted small mb-0">Assurez-vous d'utiliser un mot de passe sÃ©curisÃ©.</p>
                        </div>

                        {{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate'}}) }}

                        <div class="form-group mb-4 position-relative">
                            {{ form_label(form.oldPassword, 'Mot de passe actuel', {'label_attr': {'class': 'form-label'}}) }}
                            <div class="input-group">
                                {{ form_widget(form.oldPassword, {'attr': {'class': 'form-control password-input', 'autocomplete': 'current-password'}}) }}
                                <button type="button" class="btn btn-light toggle-password">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            {{ form_errors(form.oldPassword) }}
                        </div>

                        <div class="form-group mb-4 position-relative">
                            {{ form_label(form.newPassword, 'Nouveau mot de passe', {'label_attr': {'class': 'form-label'}}) }}
                            <div class="input-group">
                                {{ form_widget(form.newPassword, {'attr': {'class': 'form-control password-input', 'autocomplete': 'new-password'}}) }}
                                <button type="button" class="btn btn-light toggle-password">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            {{ form_errors(form.newPassword) }}
                        </div>

                        <div class="d-grid mt-4 gap-2">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-save me-2"></i> Enregistrer
                            </button>
                            <a href="{{ path('app_profile') }}" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-1"></i> Retour au profil
                            </a>
                        </div>

                        {{ form_end(form) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block stylesheets %}
{{ parent() }}
<style>
.password-reset-page {
    min-height: 100vh;
    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
}

.security-avatar {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, #f35525, #ff6b3d);
    color: white;
    font-size: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    box-shadow: 0 4px 10px rgba(243, 85, 37, 0.4);
}

.card {
    animation: slideDown 0.6s ease both;
}

@keyframes slideDown {
    0% {
        transform: translateY(-30px);
        opacity: 0;
    }
    100% {
        transform: translateY(0);
        opacity: 1;
    }
}

.input-group {
    position: relative;
}

.toggle-password {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #6c757d;
    font-size: 18px;
    cursor: pointer;
}

.toggle-password:hover {
    color: #343a40;
}

.btn-primary {
    background: linear-gradient(135deg, #f35525, #ff6b3d);
    border: none;
    transition: 0.3s;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #e44b20, #ff542e);
}

.btn-outline-secondary {
    border-color: #ced4da;
}

.btn-outline-secondary:hover {
    background-color: #e2e6ea;
}
</style>
{% endblock %}

{% block javascripts %}
{{ parent() }}
<script>
document.addEventListener('DOMContentLoaded', function () {
    const toggleButtons = document.querySelectorAll('.toggle-password');
    toggleButtons.forEach(button => {
        button.addEventListener('click', function () {
            const input = this.closest('.input-group').querySelector('.password-input');
            if (input.type === 'password') {
                input.type = 'text';
                this.querySelector('i').classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                input.type = 'password';
                this.querySelector('i').classList.replace('fa-eye-slash', 'fa-eye');
            }
        });
    });
});
</script>
{% endblock %}
